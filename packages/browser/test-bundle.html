<!doctype html>
<html>
  <head>
    <title>Test Bundle</title>
  </head>
  <body>
    <h1>Testing Bundle</h1>
    <div id="output"></div>
    <div id="qr"></div>

    <script type="module">
      const output = document.getElementById('output');

      function log(message) {
        console.log(message);
        const p = document.createElement('p');
        p.textContent = message;
        output.appendChild(p);
      }

      try {
        log('ğŸš€ Starting import...');
        const module = await import('./dist/bundle.js');
        log('âœ… Module loaded');
        log('ğŸ“¦ Exports: ' + Object.keys(module).join(', '));

        const { QRGenerator } = module;
        log('âœ… QRGenerator: ' + typeof QRGenerator);

        if (QRGenerator) {
          log('ğŸ¨ Creating QR code...');
          const qr = new QRGenerator({
            url: 'https://example.com',
            size: 200
          });
          const canvas = await qr.generate();
          document.getElementById('qr').appendChild(canvas);
          log('âœ… QR code created successfully!');
        } else {
          log('âŒ QRGenerator is undefined');
        }
      } catch (error) {
        log('âŒ Error: ' + error.message);
        log('âŒ Stack: ' + error.stack);
      }
    </script>
  </body>
</html>
